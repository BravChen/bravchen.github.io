<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Vue-Cli #  安装 #  可以使用下列任一命令安装这个新的包
npm install -g @vue/cli # OR yarn global add @vue/cli 安装后使用，以下命令查看版本
vue --version  官方文档：Vue-Cli 安装
 使用 Vue-2.x 模板 #  作用：使用旧版的 Vue 功能
Vue CLI &gt;= 3 和旧版使用了相同的 vue 命令，所以 Vue CLI 2 (vue-cli) 被覆盖了。如果你仍然需要使用旧版本的 vue init 功能，你可以全局安装一个桥接工具：
npm install -g @vue/cli-init # `vue init` 的运行效果将会跟 `vue-cli@2.x` 相同 vue init webpack my-project 当前目录创建项目 #  执行以下命令，在当前目录下创建
vue init webpack .  官方文档：拉取-2-x-模板-旧版本">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="多人博客项目(详细)" />
<meta property="og:description" content="Vue-Cli #  安装 #  可以使用下列任一命令安装这个新的包
npm install -g @vue/cli # OR yarn global add @vue/cli 安装后使用，以下命令查看版本
vue --version  官方文档：Vue-Cli 安装
 使用 Vue-2.x 模板 #  作用：使用旧版的 Vue 功能
Vue CLI &gt;= 3 和旧版使用了相同的 vue 命令，所以 Vue CLI 2 (vue-cli) 被覆盖了。如果你仍然需要使用旧版本的 vue init 功能，你可以全局安装一个桥接工具：
npm install -g @vue/cli-init # `vue init` 的运行效果将会跟 `vue-cli@2.x` 相同 vue init webpack my-project 当前目录创建项目 #  执行以下命令，在当前目录下创建
vue init webpack .  官方文档：拉取-2-x-模板-旧版本" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bravchen.github.io/history/2019-10-25-%E5%A4%9A%E4%BA%BA%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%E8%AF%A6%E7%BB%86/" />
<meta property="article:published_time" content="2019-10-25T22:53:55+00:00" />
<meta property="article:modified_time" content="2019-10-25T22:53:55+00:00" />
<title>多人博客项目(详细) | MrChen</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.e4e56f7c42eea0eaebdeab57881fc035b2061a6f8ab5f090eb5cb25469ab5944.css" integrity="sha256-5OVvfELuoOrr3qtXiB/ANbIGGm&#43;KtfCQ61yyVGmrWUQ=">
<script defer src="/en.search.min.895afb2ab0f75c4553baefa3caf53699395d3e9abef4e8a782f78dd87c4a9c04.js" integrity="sha256-iVr7KrD3XEVTuu&#43;jyvU2mTldPpq&#43;9OingveN2HxKnAQ="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>MrChen</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  

  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/posts/" class="collapsed ">博客</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/" class="collapsed ">转载</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/" class="collapsed ">历史</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/history/2019-10-10-%E5%A4%9A%E4%BA%BA%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%E7%AE%80%E8%AE%B0/" class="">多人博客项目(简记)</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-15-keyboard-nav/" class="">键盘导航</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-14-canvas/" class="">Canvas画板</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-08-28-%E5%AE%89%E5%8D%93%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8%E6%A1%88%E4%BE%8B/" class="">安卓音乐播放器案例</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-12-12-%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%E8%AF%AD%E6%B3%95%E7%B3%96%E7%AE%80%E7%89%88/" class="">函数与对象的语法糖(索引)</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-12-01-function-object-sugar/" class="">函数与对象的语法糖一</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-12-01-%E5%87%BD%E6%95%B0%E4%B8%8E%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96%E4%BA%8C/" class="">函数与对象的语法糖二</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/0cd88b5c/" class="">模块化</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-04-07-vue%E5%A4%9A%E4%BA%BA%E5%85%B1%E4%BA%AB%E5%8D%9A%E5%AE%A2/" class="">[项目] Vue 多人共享博客</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-03-31-jsonp/" class="">[高级] 35 - JSONP</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-25-%E5%A4%9A%E4%BA%BA%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE%E8%AF%A6%E7%BB%86/" class="active">多人博客项目(详细)</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-06-04-vue-plugin-int/" class="">Vue插件安装</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-06-04-css-selector/" class="">CSS选择器总结</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/dd3e7bbd/" class="">常用的HTML5标签</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-04-25-%E7%AE%80%E5%8E%86%E6%80%8E%E4%B9%88%E5%86%99/" class="">简历怎么写</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-04-12-lx%E4%B8%BB%E9%A2%98%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/" class="">lx主题中文文档</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-27-css-grid-%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80/" class="">CSS Grid 网格布局</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-17-jquery%E5%B8%B8%E7%94%A8api%E6%80%BB%E7%BB%93/" class="">jQuery常用API总结</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-17-js%E5%B8%B8%E7%94%A8api%E6%80%BB%E7%BB%93/" class="">JS 常用API总结</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-17-yarn%E5%85%A5%E9%97%A8/" class="">yarn 入门</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-17-npm%E5%85%A5%E9%97%A8/" class="">npm 入门</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-04-es6%E6%96%B0%E7%89%B9%E6%80%A7/" class="">ES6新特性</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-03-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="">面向对象</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-03-jquery%E5%88%B6%E4%BD%9C%E8%BD%AE%E6%92%AD/" class="">jQuery制作轮播</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/jquery%E8%BD%AE%E6%92%AD%E6%A1%88%E4%BE%8B/" class="">jQuery制作轮播</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-03-%E8%87%AA%E5%88%B6jquery/" class="">自制jQuery</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-10-01-mvvm/" class="">MVVM</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-28-this%E6%98%AF%E4%BB%80%E4%B9%88/" class="">this是什么</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-27-new%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88/" class="">New做了什么</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-21-%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97%E5%8C%96/" class="">代码模块化</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-20-mvc%E6%80%9D%E6%83%B3/" class="">MVC思想</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-18-%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0-ajax/" class="">自己实现 AJAX</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-17-ajax/" class="">AJAX</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-16-jsonp/" class="">JSONP</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-14-vim-get-started/" class="">vim 入门</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-14-vim%E7%9A%84%E4%BD%BF%E7%94%A8/" class="">vim 的使用</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-10-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7/" class="">命令行常用技巧</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-09-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/" class="">浏览器缓存</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-09-css%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7/" class="">CSS 常用属性</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-09-01-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2-%E5%93%8D%E5%BA%94%E5%BC%8F/" class="">移动端页面(响应式)</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/element-ui/" class="">Element UI</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/vue%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B/" class="">Vue 入门案例</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/%E6%B5%8B%E8%AF%95%E9%A1%B5/" class="">测试页</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-08-28-webpack-use/" class="">webpack 的使用</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/js%E5%9F%BA%E7%A1%80%E5%B8%B8%E8%AF%86/" class="">JS基础常识</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/action/" class="">Action 官方文档</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/axios%E5%85%A5%E9%97%A8/" class="">Axios 入门</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/js%E4%B8%AD%E7%9A%84symbol%E6%98%AF%E4%BB%80%E4%B9%88/" class="">JS 中的 Symbol 是什么？</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/json%E6%98%AF%E4%BB%80%E4%B9%88/" class="">JSON 是什么？</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2019-11-12-module%E8%AF%AD%E6%B3%95/" class="">Module语法</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/vue-%E7%82%B9%E5%87%BB%E7%A9%BA%E7%99%BD%E5%85%B3%E9%97%AD%E6%B5%AE%E5%B1%82/" class="">Vue 点击空白关闭浮层</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/vue-cli%E4%BD%BF%E7%94%A8/" class="">Vue-cli 使用</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/vuex%E4%BD%BF%E7%94%A8/" class="">Vuex 使用</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-02-03-%E5%8E%9F%E5%9E%8B%E9%93%BE%E8%A1%A5%E5%85%85/" class="">原型链补充</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-05-07-%E6%95%B0%E7%BB%84/" class="">数组</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/2020-04-27-%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E7%AE%80%E5%8E%86%E5%88%B6%E4%BD%9C%E8%BF%87%E7%A8%8B/" class="">简历该怎么写</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/history/%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E5%92%8C%E4%BE%A6%E5%90%AC%E5%99%A8/" class="">计算属性和监听器</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>多人博客项目(详细)</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#vue-cli">Vue-Cli</a>
      <ul>
        <li><a href="#安装">安装</a></li>
        <li><a href="#使用-vue-2x-模板">使用 Vue-2.x 模板</a></li>
        <li><a href="#当前目录创建项目">当前目录创建项目</a></li>
      </ul>
    </li>
    <li><a href="#项目文件目录">项目文件目录</a></li>
    <li><a href="#配置路由">配置路由</a></li>
    <li><a href="#组件目录">组件目录</a></li>
    <li><a href="#css-样式独立">CSS 样式独立</a></li>
    <li><a href="#使用-less-语法">使用 less 语法</a>
      <ul>
        <li><a href="#安装预处理器">安装预处理器</a></li>
        <li><a href="#使用-css-公共属性">使用 CSS 公共属性</a></li>
      </ul>
    </li>
    <li><a href="#使用-element-ui">使用 Element-UI</a></li>
    <li><a href="#创建公共目录">创建公共目录</a></li>
    <li><a href="#测试后台">测试后台</a>
      <ul>
        <li><a href="#requestjs-封装测试">request.js 封装测试</a></li>
        <li><a href="#authjs封装测试">auth.js封装测试</a></li>
      </ul>
    </li>
    <li><a href="#创建模板">创建模板</a>
      <ul>
        <li><a href="#使用-grid-布局">使用 Grid 布局</a></li>
      </ul>
    </li>
    <li><a href="#添加vuex">添加Vuex</a>
      <ul>
        <li><a href="#作用">作用</a></li>
        <li><a href="#安装-1">安装</a></li>
        <li><a href="#引入vuex">引入Vuex</a></li>
        <li><a href="#主页中引入">主页中引入</a></li>
        <li><a href="#实现登录注册功能">实现登录/注册功能</a></li>
      </ul>
    </li>
    <li><a href="#vue-事件绑定">Vue 事件绑定</a></li>
    <li><a href="#完善路由权限">完善路由权限</a></li>
    <li><a href="#添加创建博客功能">添加创建博客功能</a></li>
    <li><a href="#首页添加后台数据">首页添加后台数据</a></li>
    <li><a href="#添加博客详情">添加博客详情</a>
      <ul>
        <li><a href="#markdown-插件">markdown 插件</a></li>
        <li><a href="#时间格式化插件">时间格式化插件</a></li>
      </ul>
    </li>
    <li><a href="#用户详情页">用户详情页</a></li>
    <li><a href="#使用到的-vue-语句">使用到的 Vue 语句</a>
      <ul>
        <li><a href="#router">router</a></li>
      </ul>
    </li>
    <li><a href="#使用到的-element-ui-语句">使用到的 Element-UI 语句</a></li>
    <li><a href="#axios-的使用">axios 的使用</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h2 id="vue-cli">
  Vue-Cli
  <a class="anchor" href="#vue-cli">#</a>
</h2>
<h3 id="安装">
  安装
  <a class="anchor" href="#%e5%ae%89%e8%a3%85">#</a>
</h3>
<p>可以使用下列任一命令安装这个新的包</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install -g @vue/cli
<span style="color:#586e75"># OR</span>
yarn global add @vue/cli
</code></pre></div><p>安装后使用，以下命令查看版本</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vue --version
</code></pre></div><blockquote>
<p>官方文档：<a href="https://cli.vuejs.org/zh/guide/installation.html">Vue-Cli 安装</a></p>
</blockquote>
<h3 id="使用-vue-2x-模板">
  使用 Vue-2.x 模板
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8-vue-2x-%e6%a8%a1%e6%9d%bf">#</a>
</h3>
<p>作用：使用旧版的 Vue 功能</p>
<p>Vue CLI &gt;= 3 和旧版使用了相同的 vue 命令，所以 Vue CLI 2 (vue-cli) 被覆盖了。如果你仍然需要使用旧版本的 vue init 功能，你可以全局安装一个桥接工具：</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install -g @vue/cli-init
<span style="color:#586e75"># `vue init` 的运行效果将会跟 `vue-cli@2.x` 相同</span>
vue init webpack my-project
</code></pre></div><h3 id="当前目录创建项目">
  当前目录创建项目
  <a class="anchor" href="#%e5%bd%93%e5%89%8d%e7%9b%ae%e5%bd%95%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae">#</a>
</h3>
<p>执行以下命令，在当前目录下创建</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vue init webpack .
</code></pre></div><blockquote>
<p>官方文档：<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#%e6%8b%89%e5%8f%96-2-x-%e6%a8%a1%e6%9d%bf-%e6%97%a7%e7%89%88%e6%9c%ac">拉取-2-x-模板-旧版本</a></p>
</blockquote>
<h2 id="项目文件目录">
  项目文件目录
  <a class="anchor" href="#%e9%a1%b9%e7%9b%ae%e6%96%87%e4%bb%b6%e7%9b%ae%e5%bd%95">#</a>
</h2>
<pre><code>├── src
│   ├── api ---   
│   │   ├── auth.js --- 封装后台的请求路由
│   │   └── blog.js --- 博客操作API封装
│   ├── assets ---  公共 less 样式
│   ├── components ---  页面组件
│   ├── helpers --- 助手
│   │   └── request.js --- 再封装的 axios
│   ├── pages 页面组件
│   ├── router Vue 路由管理器
│   ├── store --- 使用 Vuex 获取修改同步博客信息文件夹
│   │   ├── modules --- 封装API
│   │   │   ├── auth.js --- 用户信息操作
│   │   │   └── blog.js --- 博客内容操作
│   │   └── index.js --- 路由
</code></pre><h2 id="配置路由">
  配置路由
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae%e8%b7%af%e7%94%b1">#</a>
</h2>
<p>打开根目录下的 <code>./src/router/index.js</code> 文件，其中</p>
<p><code>import HelloWorld from '@/components/HelloWorld'</code> 表示引入 src 目录下的 <code>/components/HelloWorld.vue</code> 文件并命名为 HelloWorld</p>
<p>@ 表示 src 目录下</p>
<p><code>export default new Router({ })</code> 输出 export default 后的对象</p>
<p>案例：</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">import</span> Vue from <span style="color:#2aa198">&#39;vue&#39;</span>
<span style="color:#268bd2">import</span> Router from <span style="color:#2aa198">&#39;vue-router&#39;</span>
<span style="color:#268bd2">import</span> HelloWorld from <span style="color:#2aa198">&#39;@/components/HelloWorld&#39;</span>

Vue.use(Router)

<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> <span style="color:#719e07">new</span> Router({
  routes<span style="color:#719e07">:</span> [
    {
      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/&#39;</span>,
      name<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;HelloWorld&#39;</span>,
      component<span style="color:#719e07">:</span> HelloWorld
    }
  ]
})
</code></pre></div><p>其中，<code>new Router()</code> 传入的对象中的 routes 表示</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> <span style="color:#719e07">new</span> Router({
  routes<span style="color:#719e07">:</span> [
    {
      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/&#39;</span>, <span style="color:#586e75">/* 配置路由地址 */</span>
      name<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;HelloWorld&#39;</span>,
      component<span style="color:#719e07">:</span> HelloWorld  <span style="color:#586e75">/* 对应显示的组件 */</span>
    }
  ]
})
</code></pre></div><h2 id="组件目录">
  组件目录
  <a class="anchor" href="#%e7%bb%84%e4%bb%b6%e7%9b%ae%e5%bd%95">#</a>
</h2>
<p>给当前项目 src 目录下创建 <code>pages</code> 目录 ( 组件目录 )，目录中每个组件路径下都包含一个 <code>.css .js .vue</code> 三个文件</p>
<pre><code>├── pages
│   ├── Create  # 创建 --- 创建博客
│   │   ├── template.css
│   │   ├── template.js
│   │   └── template.vue
│   ├── Detail  # 详情 --- 博客详情
│   ├── Edit  # 编辑 --- 博客编辑
│   ├── Index  # 首页
│   ├── Login  # 登录
│   ├── My  # 我的 --- 我的个人主页
│   ├── Register # 注册
│   └── User # 用户
</code></pre><h2 id="css-样式独立">
  CSS 样式独立
  <a class="anchor" href="#css-%e6%a0%b7%e5%bc%8f%e7%8b%ac%e7%ab%8b">#</a>
</h2>
<p>当我们修改每个组件目录下的 CSS 样式时，可能会生效与所有组件中，只要在 style 中添加 <code>scoped</code> 属性即可，如下：</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">style</span> scoped src<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;./template.css&#34;</span>&gt;&lt;/<span style="color:#268bd2">style</span>&gt;
</code></pre></div><h2 id="使用-less-语法">
  使用 less 语法
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8-less-%e8%af%ad%e6%b3%95">#</a>
</h2>
<p>less 可以声明变量，相比 css 语法会方便很多，所以在开发时可以使用 less 语法，发布时再做转换。</p>
<p>引入时在 style 标签中添加 <code>lang=&quot;less&quot;</code> 属性即可，如下：</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">style</span> scoped lang<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;less&#34;</span> src<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;./template.less&#34;</span>&gt;&lt;/<span style="color:#268bd2">style</span>&gt;
</code></pre></div><h3 id="安装预处理器">
  安装预处理器
  <a class="anchor" href="#%e5%ae%89%e8%a3%85%e9%a2%84%e5%a4%84%e7%90%86%e5%99%a8">#</a>
</h3>
<p>添加后不能直接使用，需要安装一个预处理器</p>
<p>在项目根目录执行以下命令安装 less 预处理器</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install -D less-loader less
</code></pre></div><blockquote>
<p>官方文档：<a href="https://cli.vuejs.org/zh/guide/css.html#%e5%bc%95%e7%94%a8%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90">引用静态资源</a></p>
</blockquote>
<h3 id="使用-css-公共属性">
  使用 CSS 公共属性
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8-css-%e5%85%ac%e5%85%b1%e5%b1%9e%e6%80%a7">#</a>
</h3>
<p>在 <code>src/assets</code> 目录下创建 <code>base.less</code> 文件(你也可以创建一个其他目录，但最好要在 src 下)。</p>
<p><strong>案例</strong></p>
<pre><code class="language-less" data-lang="less">@themesRed: #ff3300;
</code></pre><p>在主页中引入此样式：</p>
<p>在 <code>src/pages/Index/template.less</code> 文件的头部添加以下内容(注意结尾必须加分号)</p>
<pre><code class="language-less" data-lang="less">@import &quot;../../assets/base.less&quot;;

h2 {
    color: @themesRed;
}
</code></pre><h2 id="使用-element-ui">
  使用 Element-UI
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8-element-ui">#</a>
</h2>
<p>查看官方文档，在 <code>src/router/index.js</code> 文件中引入：</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">import</span> ElementUI from <span style="color:#2aa198">&#39;element-ui&#39;</span>;
<span style="color:#268bd2">import</span> <span style="color:#2aa198">&#39;element-ui/lib/theme-chalk/index.css&#39;</span>;

Vue.use(ElementUI);
</code></pre></div><blockquote>
<p>官方文档：<a href="https://element.eleme.cn/#/zh-CN">Element-UI</a></p>
</blockquote>
<h2 id="创建公共目录">
  创建公共目录
  <a class="anchor" href="#%e5%88%9b%e5%bb%ba%e5%85%ac%e5%85%b1%e7%9b%ae%e5%bd%95">#</a>
</h2>
<p>目录列表</p>
<pre><code>├── src
│   ├── api ---  
│   │   ├── auth.js --- 封装后台的请求路由
│   │   └── blog.js --- 博客操作API封装
│   ├── assets ---  
│   ├── components ---  
│   ├── helpers --- 助手
│   │   └── request.js --- 再封装的 axios
│   ├── pages # 
│   ├── router # 
│   ├── store --- 使用 Vuex 获取修改同步博客信息文件夹
│   │   ├── modules --- 封装API
│   │   │   ├── auth.js --- 用户信息操作
│   │   │   └── blog.js --- 博客内容操作
│   │   └── index.js --- 路由
</code></pre><p>其中</p>
<ul>
<li>helpers 目录：存放一些公共方法，方便所有文件调用
<ul>
<li>request.js 文件：存放 axios (再封装的 axios)</li>
</ul>
</li>
</ul>
<h2 id="测试后台">
  测试后台
  <a class="anchor" href="#%e6%b5%8b%e8%af%95%e5%90%8e%e5%8f%b0">#</a>
</h2>
<h3 id="requestjs-封装测试">
  request.js 封装测试
  <a class="anchor" href="#requestjs-%e5%b0%81%e8%a3%85%e6%b5%8b%e8%af%95">#</a>
</h3>
<p>在 <code>src &gt; pages &gt; Index &gt; template.js</code>  文件的头部引入以下文件</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">import</span> request from <span style="color:#2aa198">&#39;@/helpers/request.js&#39;</span> 
<span style="color:#586e75">/* 此处为例便于测试，将 request 存入全局变量 request 中 */</span>
<span style="color:#b58900">window</span>.request <span style="color:#719e07">=</span> request
</code></pre></div><p>然后打开博客项目主页，进行以下测试</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#586e75">/* 登录成功测试 */</span>
request(<span style="color:#2aa198">&#39;/auth/login&#39;</span>, <span style="color:#2aa198">&#39;post&#39;</span>,{username<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;hunger1&#39;</span>, password<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;123456&#39;</span>})
    .then(data=&gt;{ console.log(data) })

<span style="color:#586e75">/* 登录失败测试 */</span>
request(<span style="color:#2aa198">&#39;/auth/login&#39;</span>, <span style="color:#2aa198">&#39;post&#39;</span>,{username<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;hunger1&#39;</span>, password<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;923456&#39;</span>}).then(data=&gt;{
  console.log(data)
}).<span style="color:#719e07">catch</span>(()=&gt;{ console.log(<span style="color:#2aa198">&#39;数据错误&#39;</span>)} ) <span style="color:#586e75">/* 这里数据出错可以使用.catch()再处理 */</span>

<span style="color:#586e75">/* 创建博客 */</span>
request(<span style="color:#2aa198">&#39;/blog&#39;</span>, <span style="color:#2aa198">&#39;post&#39;</span>, {
  title<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;我的第一篇博客&#39;</span>,
  content<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;## 我的第一篇博客&#39;</span>,
  description<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;简介&#39;</span>
}).then(data=&gt;{
  console.log(data)
})

<span style="color:#586e75">/* 获取博客网站数据 */</span>
request(<span style="color:#2aa198">&#39;/blog&#39;</span>).then(data=&gt;{
  console.log(data)
})
</code></pre></div><p>控制台输出示例</p>
<pre><code class="language-console" data-lang="console">▼{status: &quot;ok&quot;, msg: &quot;登录成功&quot;, data: {/* … */}}
    data: {
      id: 6, 
      username: &quot;hunger1&quot;, 
      avatar: &quot;4.jpg&quot;, 
      createdAt: &quot;2018-06-21T07:06:03.314Z&quot;, 
      updatedAt: &quot;2018-06-21T07:06:03.314Z&quot;
    }
    msg: &quot;登录成功&quot;
    status: &quot;ok&quot;
    __proto__: Object
</code></pre><h3 id="authjs封装测试">
  auth.js封装测试
  <a class="anchor" href="#authjs%e5%b0%81%e8%a3%85%e6%b5%8b%e8%af%95">#</a>
</h3>
<p>在 <code>src &gt; pages &gt; Index &gt; template.js</code> 文件的头部追加以下文件</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">import</span> auth from <span style="color:#2aa198">&#39;@/api/auth.js&#39;</span>

<span style="color:#586e75">/* 为了便于测试 将 auth 变为全局变量 */</span>
<span style="color:#b58900">window</span>.auth <span style="color:#719e07">=</span> auth
</code></pre></div><p>然后打开博客项目主页，进行以下测试</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#586e75">/* 注册测试 */</span>
auth.register({username<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;hunger39e&#39;</span>, password<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;123456&#39;</span>}).then(res=&gt;console.log(res))
<span style="color:#586e75">/* 登录测试 */</span>
auth.login({username<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;hunger&#39;</span>, password<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;123456&#39;</span>}).then(res=&gt;console.log(res))
<span style="color:#586e75">/* 获取用户信息 */</span>
auth.getInfo().then(res=&gt;console.log(res))
<span style="color:#586e75">/* 注销测试 */</span>
auth.logout()
</code></pre></div><p>控制台输出示例</p>
<pre><code class="language-console" data-lang="console">▼{status: &quot;ok&quot;, msg: &quot;操作提示&quot;, total: 1782, totalPage: 179, page: 1, …}
    data: (10) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
    msg: &quot;操作提示&quot;
    page: 1
    status: &quot;ok&quot;
    total: 1782
    totalPage: 179
    __proto__: Object
</code></pre><h2 id="创建模板">
  创建模板
  <a class="anchor" href="#%e5%88%9b%e5%bb%ba%e6%a8%a1%e6%9d%bf">#</a>
</h2>
<p>components 文件夹中创建以下文件</p>
<pre><code>├── src
│   ├── api
│   ├── assets
│   │   ├── base.less --- CSS公共属性
│   │   └── common.less --- CSS公共样式
│   ├── components
│   │   ├── footer.vue --- 页面底部组件
│   │   └── header.vue --- 页面头部组件
│   ├── helpers
│   ├── pages 
│   ├── router  
│   ├── App.vue --- 在页面引入模板
│   └── main.js 
</code></pre><p>在 <code>App.vue</code> 中引入文件</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#268bd2">template</span>&gt;
  &lt;<span style="color:#268bd2">div</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;app&#34;</span>&gt;
    &lt;<span style="color:#268bd2">Header</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;header&#34;</span>&gt;&lt;/<span style="color:#268bd2">Header</span>&gt;
    &lt;<span style="color:#268bd2">main</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;main&#34;</span>&gt;
      &lt;<span style="color:#268bd2">router-view</span>/&gt;
    &lt;/<span style="color:#268bd2">main</span>&gt;
    &lt;<span style="color:#268bd2">Footer</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;footer&#34;</span>&gt;&lt;/<span style="color:#268bd2">Footer</span>&gt;
  &lt;/<span style="color:#268bd2">div</span>&gt;
&lt;/<span style="color:#268bd2">template</span>&gt;

&lt;<span style="color:#268bd2">script</span>&gt;
<span style="color:#268bd2">import</span> Header from <span style="color:#2aa198">&#39;@/components/header&#39;</span>
<span style="color:#268bd2">import</span> Footer from <span style="color:#2aa198">&#39;@/components/footer&#39;</span>

<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
  name<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;App&#39;</span>,
  components<span style="color:#719e07">:</span> {
    Header,
    Footer
  }
}
&lt;/<span style="color:#268bd2">script</span>&gt;

&lt;<span style="color:#268bd2">style</span>&gt;
#app {
  <span style="color:#719e07">font-size</span>: <span style="color:#2aa198">18</span><span style="color:#dc322f">px</span>;
}
&lt;/<span style="color:#268bd2">style</span>&gt;

</code></pre></div><p>其中 <code>&lt;router-view/&gt;</code> 在 <code>src</code> 目录下的 <code>router</code> 文件夹中引入</p>
<h3 id="使用-grid-布局">
  使用 Grid 布局
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8-grid-%e5%b8%83%e5%b1%80">#</a>
</h3>
<p>html</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#268bd2">div</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;app&#34;</span>&gt;
  &lt;<span style="color:#268bd2">header</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;header&#34;</span>&gt;头部...&lt;/<span style="color:#268bd2">header</span>&gt;
  &lt;<span style="color:#268bd2">main</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;main&#34;</span>&gt;内容...&lt;/<span style="color:#268bd2">main</span>&gt;
  &lt;<span style="color:#268bd2">footer</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;footer&#34;</span>&gt;底部...&lt;/<span style="color:#268bd2">footer</span>&gt;
&lt;/<span style="color:#268bd2">div</span>&gt;
</code></pre></div><p>CSS</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">#app {
  <span style="color:#719e07">display</span>: <span style="color:#719e07">grid</span>;
  <span style="color:#719e07">grid-template-columns</span>: <span style="color:#2aa198">12</span><span style="color:#dc322f">%</span> <span style="color:#cb4b16">auto</span> <span style="color:#2aa198">12</span><span style="color:#dc322f">%</span>;
  <span style="color:#719e07">grid-template-rows</span>: <span style="color:#cb4b16">auto</span> <span style="color:#2aa198">1</span>fr <span style="color:#cb4b16">auto</span>;
  <span style="color:#719e07">grid-template-areas</span>: <span style="color:#2aa198">&#34;header header header&#34;</span>
                        <span style="color:#2aa198">&#34;. main .&#34;</span>
                        <span style="color:#2aa198">&#34;footer footer footer&#34;</span>
}
#header{
  <span style="color:#719e07">grid-area</span>: header;
  <span style="color:#719e07">padding</span>: <span style="color:#2aa198">10</span><span style="color:#dc322f">px</span> <span style="color:#2aa198">12</span><span style="color:#dc322f">%</span>;
  <span style="color:#719e07">background-color</span>: <span style="color:#2aa198">#f68f25</span>;
}
#main{
  <span style="color:#719e07">grid-area</span>: main;
  <span style="color:#719e07">background-color</span>: <span style="color:#2aa198">#4ba846</span>;
  <span style="color:#719e07">padding</span>: <span style="color:#2aa198">10</span><span style="color:#dc322f">px</span>;
}
#footer{
  <span style="color:#719e07">grid-area</span>: footer;
  <span style="color:#719e07">padding</span>: <span style="color:#2aa198">10</span><span style="color:#dc322f">px</span> <span style="color:#2aa198">12</span><span style="color:#dc322f">%</span>;
  <span style="color:#719e07">background-color</span>: <span style="color:#2aa198">#0476c2</span>;
}
</code></pre></div><blockquote>
<p>预览效果 <a href="https://jsbin.com/hemezogeli/1/edit?html,output">案例预览</a></p>
</blockquote>
<p>添加宽度变小自适应</p>
<p>当设备宽度小于 768px 时，页面 padding 变为固定 10px</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scss" data-lang="scss"><span style="color:#719e07">@media</span> (<span style="color:#cb4b16">max-width</span><span style="color:#719e07">:</span> <span style="color:#2aa198">768</span><span style="color:#dc322f">px</span>) {
    #app {
		<span style="color:#268bd2">grid-template-columns</span><span style="color:#268bd2">:</span> <span style="color:#268bd2">10px</span> <span style="color:#268bd2">auto</span> <span style="color:#268bd2">10px</span>;
        #header<span style="color:#719e07">,</span> #footer {
			<span style="color:#268bd2">padding-left</span><span style="color:#268bd2">:</span> <span style="color:#268bd2">10px</span>;
            <span style="color:#268bd2">padding-right</span><span style="color:#268bd2">:</span> <span style="color:#268bd2">10px</span>;
        }
    }
}
</code></pre></div><h2 id="添加vuex">
  添加Vuex
  <a class="anchor" href="#%e6%b7%bb%e5%8a%a0vuex">#</a>
</h2>
<h3 id="作用">
  作用
  <a class="anchor" href="#%e4%bd%9c%e7%94%a8">#</a>
</h3>
<p>Vuex 主要用于同步不同模块之间的公共数据</p>
<h3 id="安装-1">
  安装
  <a class="anchor" href="#%e5%ae%89%e8%a3%85-1">#</a>
</h3>
<p><strong>NPM</strong></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install vuex --save
</code></pre></div><p><strong>Yarn</strong></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">yarn add vuex
</code></pre></div><blockquote>
<p>官方文档：<a href="https://vuex.vuejs.org/zh/installation.html">Vuex 安装</a></p>
</blockquote>
<h3 id="引入vuex">
  引入Vuex
  <a class="anchor" href="#%e5%bc%95%e5%85%a5vuex">#</a>
</h3>
<h4 id="目录索引">
  目录索引
  <a class="anchor" href="#%e7%9b%ae%e5%bd%95%e7%b4%a2%e5%bc%95">#</a>
</h4>
<pre><code>├── store --- 使用 Vuex 获取修改同步博客信息文件夹
│   ├── modules --- 封装API
│   │   ├── auth.js --- 用户信息操作
│   │   └── blog.js --- 博客内容操作
│   └── index.js --- 路由
</code></pre><h4 id="封装-vuex">
  封装 Vuex
  <a class="anchor" href="#%e5%b0%81%e8%a3%85-vuex">#</a>
</h4>
<p>在 <code>src</code> 目录下创建 <code>store</code> 文件夹，用于封装 Vuex 的状态数据。</p>
<p>在 <code>store</code> 中创建 <code>index.js</code> 文件，用做引出文件的路由。</p>
<p>index.js 文件夹中添加以下内容：</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> Vue from <span style="color:#2aa198">&#39;vue&#39;</span>
<span style="color:#268bd2">import</span> Vuex from <span style="color:#2aa198">&#39;vuex&#39;</span>
<span style="color:#268bd2">import</span> auth from <span style="color:#2aa198">&#39;./modules/auth&#39;</span>
<span style="color:#268bd2">import</span> blog from <span style="color:#2aa198">&#39;./modules/blog&#39;</span>

Vue.use(Vuex)

<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> <span style="color:#719e07">new</span> Vuex.Store({
modules<span style="color:#719e07">:</span> {
    auth,
    blog
}
})
</code></pre></div><p>在 <code>store</code> 中创建 <code>modules</code> 文件夹，用于存放分类的模块</p>
<p>在 <code>modules</code> 文件夹中创建 <code>auth.js</code> 文件，用于封装用户登录注册相关的数据的一些操作。</p>
<p><strong><code>auth.js</code> 文件内容</strong></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#586e75">/* 引入 api 路由 */</span>
<span style="color:#268bd2">import</span> auth from <span style="color:#2aa198">&#39;@/api/auth&#39;</span>

<span style="color:#586e75">/* 默认下的 state 数据 */</span>
<span style="color:#268bd2">const</span> state <span style="color:#719e07">=</span> {
  <span style="color:#586e75">/* 用户账号信息，比如用户名，密码之类 */</span>
  user<span style="color:#719e07">:</span> <span style="color:#cb4b16">null</span>,
  <span style="color:#586e75">/* 用户登录状态 */</span>
  isLogin<span style="color:#719e07">:</span> <span style="color:#cb4b16">false</span>
}

<span style="color:#586e75">/* 同步的变更用户登录状态 */</span>
<span style="color:#268bd2">const</span> getters <span style="color:#719e07">=</span> {
  user<span style="color:#719e07">:</span> state =&gt; state.user,
  isLogin<span style="color:#719e07">:</span> state =&gt; state.isLogin
}
<span style="color:#586e75">/* 操作用户的账户数据 */</span>
<span style="color:#268bd2">const</span> mutations <span style="color:#719e07">=</span> {
    <span style="color:#586e75">/* state (修改前的数据)，payload (需要传入的新数据) */</span>
  setUser(state, payload) {
    state.user <span style="color:#719e07">=</span> payload.user
  },

  setLogin(state, payload) {
    state.isLogin <span style="color:#719e07">=</span> payload.isLogin
  }
}

<span style="color:#586e75">/* 异步的操作 */</span>
<span style="color:#268bd2">const</span> actions <span style="color:#719e07">=</span> {
  <span style="color:#586e75">/* === 登录 ===
</span><span style="color:#586e75">   * 语法说明：xxx({ commit }, { username, password })
</span><span style="color:#586e75">   * ES6语法，表示第二个参数传入的是一个对象，该对象必须有 username 和 password 属性 */</span>
  login({ commit }, { username, password }) {
    <span style="color:#719e07">return</span> auth.login({ username, password })
      .then(res =&gt; {
        commit(<span style="color:#2aa198">&#39;setUser&#39;</span>, { user<span style="color:#719e07">:</span> res.data })
        commit(<span style="color:#2aa198">&#39;setLogin&#39;</span>, { isLogin<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span> })
      })
  },
  <span style="color:#586e75">/* === 注册 === */</span>
  async register({ commit }, { username, password }) {
    <span style="color:#268bd2">let</span> res <span style="color:#719e07">=</span> await auth.register({ username, password })
    <span style="color:#586e75">/* 上面 mutations 中的 setUser(state, payload) 中传入的 payload 就代表下面的commit括号中的第二个参数 */</span>
    commit(<span style="color:#2aa198">&#39;setUser&#39;</span>, { user<span style="color:#719e07">:</span> res.data })
    commit(<span style="color:#2aa198">&#39;setLogin&#39;</span>, { isLogin<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span> })
    <span style="color:#719e07">return</span> res.data
  },
  <span style="color:#586e75">/* === 注销 === */</span>
  async logout({ commit }) {
    await auth.logout()
    commit(<span style="color:#2aa198">&#39;setUser&#39;</span>, { user<span style="color:#719e07">:</span> <span style="color:#cb4b16">null</span> })
    commit(<span style="color:#2aa198">&#39;setLogin&#39;</span>, { isLogin<span style="color:#719e07">:</span> <span style="color:#cb4b16">false</span> })
  },
  <span style="color:#586e75">/* === 检测用户登录状态 === 
</span><span style="color:#586e75">   * 如果未登录则设置用户数据为空，并返回 false 
</span><span style="color:#586e75">   * 如果登录则设置当前用户数据，并返回 true */</span>
  async checkLogin({ commit, state}) {
    <span style="color:#586e75">/* 此处的 state 是上面的 const state  */</span>
    <span style="color:#719e07">if</span>(state.isLogin) <span style="color:#719e07">return</span> <span style="color:#cb4b16">true</span>
    <span style="color:#586e75">/* api 文件 中的 auth.getInfo 用来判断用户是否登录 */</span>
    <span style="color:#268bd2">let</span> res <span style="color:#719e07">=</span> await auth.getInfo()
    commit(<span style="color:#2aa198">&#39;setLogin&#39;</span>, { isLogin<span style="color:#719e07">:</span> res.isLogin })
    <span style="color:#719e07">if</span>(<span style="color:#719e07">!</span>res.isLogin) <span style="color:#719e07">return</span> <span style="color:#cb4b16">false</span>
    commit(<span style="color:#2aa198">&#39;setUser&#39;</span>, { user<span style="color:#719e07">:</span> res.data })
    <span style="color:#719e07">return</span> <span style="color:#cb4b16">true</span>
  }
}
<span style="color:#586e75">/* then 的使用方法
</span><span style="color:#586e75"> * this.logout().then( isLogin=&gt;{} ) */</span>
<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
  state,
  getters,
  mutations,
  actions
}
</code></pre></div><p><strong>？actions 中的ES6语法</strong></p>
<p><strong>普通写法</strong></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">login({ commit }, { username, password }) {
<span style="color:#719e07">return</span> auth.login({ username, password })
  .then(res =&gt; {
    commit(<span style="color:#2aa198">&#39;setUser&#39;</span>, { user<span style="color:#719e07">:</span> res.data })
    commit(<span style="color:#2aa198">&#39;setLogin&#39;</span>, { isLogin<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span> })
  })
}
</code></pre></div><p><strong>ES6写法</strong></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">async login({ commit }, { username, password }) {
    <span style="color:#268bd2">let</span> res <span style="color:#719e07">=</span> await auth.login({ username, password })
    commit(<span style="color:#2aa198">&#39;setUser&#39;</span>, { user<span style="color:#719e07">:</span> res.data })
    commit(<span style="color:#2aa198">&#39;setLogin&#39;</span>, { isLogin<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span> })
    <span style="color:#719e07">return</span> res.data
}
</code></pre></div><p>在 <code>modules </code> 文件夹中创建 <code>blog.js</code> 文件夹，用于封装博客内容操作相关的数据。</p>
<p><strong><code>blog.js</code> 的内容(暂未定)</strong></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
    state<span style="color:#719e07">:</span>{},
    getters<span style="color:#719e07">:</span>{},
    mutations<span style="color:#719e07">:</span>{},
    actions<span style="color:#719e07">:</span>{}
}
</code></pre></div><h3 id="主页中引入">
  主页中引入
  <a class="anchor" href="#%e4%b8%bb%e9%a1%b5%e4%b8%ad%e5%bc%95%e5%85%a5">#</a>
</h3>
<p>在 src 目录下的 <code>main.js</code> 文件中引入</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> store from <span style="color:#2aa198">&#39;./store&#39;</span>
</code></pre></div><p>并在文件中的 Vue 对象中传入 store</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#719e07">new</span> Vue({
    el<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;#app&#39;</span>,
    router,
    store,
    components<span style="color:#719e07">:</span> { App },
    template<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;&lt;App/&gt;&#39;</span>
})
</code></pre></div><p>打开控制台，在控制台的 <a href="https://cn.vuejs.org/v2/guide/installation.html#Vue-Devtools"><code>Vue Devtools</code></a> 中切换到时钟图标，可以看到一个 state 在 state 下有两个属性 分别是 auth 和 blog</p>
<p>如下图所示</p>
<p>xxximg.jpg</p>
<p><strong><code>main.js</code> 最终案例</strong></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> Vue from <span style="color:#2aa198">&#39;vue&#39;</span>
<span style="color:#268bd2">import</span> App from <span style="color:#2aa198">&#39;./App&#39;</span>
<span style="color:#268bd2">import</span> router from <span style="color:#2aa198">&#39;./router&#39;</span>
<span style="color:#268bd2">import</span> store from <span style="color:#2aa198">&#39;./store&#39;</span>

Vue.config.productionTip <span style="color:#719e07">=</span> <span style="color:#cb4b16">false</span>

<span style="color:#719e07">new</span> Vue({
  el<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;#app&#39;</span>,
  router,
  store,
  components<span style="color:#719e07">:</span> { App },
  template<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;&lt;App/&gt;&#39;</span>
})
</code></pre></div><h3 id="实现登录注册功能">
  实现登录/注册功能
  <a class="anchor" href="#%e5%ae%9e%e7%8e%b0%e7%99%bb%e5%bd%95%e6%b3%a8%e5%86%8c%e5%8a%9f%e8%83%bd">#</a>
</h3>
<p>打开 <code>src &gt; components &gt; header.vue</code>  文件</p>
<p>JS 部分添加如下内容</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#586e75">/* 引入 auth */</span>
<span style="color:#268bd2">import</span> auth from <span style="color:#2aa198">&#39;@/api/auth&#39;</span>
<span style="color:#586e75">/* 为了测试登录注册将auth变为全局 */</span>
<span style="color:#b58900">window</span>.auth <span style="color:#719e07">=</span> auth
<span style="color:#586e75">/* Vuex 提供的函数，经过处理映射到当前文件 */</span>
<span style="color:#268bd2">import</span> { mapGetters, mapActions } from <span style="color:#2aa198">&#39;vuex&#39;</span>

<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
  data() {
    <span style="color:#719e07">return</span> { }
  },
  computed<span style="color:#719e07">:</span> {
    <span style="color:#586e75">/* 获取 vuex 中的 getters */</span>
    ...mapGetters([
      <span style="color:#2aa198">&#39;isLogin&#39;</span>,
      <span style="color:#2aa198">&#39;user&#39;</span>
    ])
  },
  <span style="color:#586e75">/* 每次加载都判断用户登录状态加载内容 */</span>
  created(){
    <span style="color:#586e75">/* 可以在函数后使用 then 的方式处理登录的结果，如.then(isLogin=&gt;xxx) */</span>
    <span style="color:#719e07">this</span>.checkLogin()
  },
  <span style="color:#586e75">/* 获取 vuex 中的判断用户登录状态的方法，引入到当前组件中
</span><span style="color:#586e75">   * 当前组件中就可以直接使用该方法 */</span>
  methods<span style="color:#719e07">:</span> {
    ...mapActions([
      <span style="color:#2aa198">&#39;checkLogin&#39;</span>,
      <span style="color:#2aa198">&#39;logout&#39;</span>
    ]),
    <span style="color:#586e75">/* 注销函数 */</span>
    onLogout(){
      <span style="color:#719e07">this</span>.logout()
    }
  }
}
</code></pre></div><p><strong>created 生命周期</strong></p>
<p>作用：数据都加载完成，但组件未加载，页面未渲染时执行，作用是尽早的获取数据</p>
<p><strong>登录测试</strong></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">auth.login({username<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;chen&#39;</span>, password<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;123654&#39;</span>}).then(res=&gt;console.log(res))
</code></pre></div><p>添加路由链接</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">router-link</span> to<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;/login&#34;</span>&gt;立刻登录<span style="color:#719e07">&lt;</span>/router-link&gt;
</code></pre></div><h2 id="vue-事件绑定">
  Vue 事件绑定
  <a class="anchor" href="#vue-%e4%ba%8b%e4%bb%b6%e7%bb%91%e5%ae%9a">#</a>
</h2>
<p>回车事件绑定</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">input</span> @keyup.enter=&#39;onxxx&#39;&gt;
</code></pre></div><h2 id="完善路由权限">
  完善路由权限
  <a class="anchor" href="#%e5%ae%8c%e5%96%84%e8%b7%af%e7%94%b1%e6%9d%83%e9%99%90">#</a>
</h2>
<p>官方文档：<a href="https://router.vuejs.org/zh/guide/advanced/meta.html">路由元信息 | Vue Router</a></p>
<p>打开 src 目录下的 <code>router &gt; index.js</code> 增加以下属性：</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> Vue from <span style="color:#2aa198">&#39;vue&#39;</span>
<span style="color:#268bd2">import</span> Router from <span style="color:#2aa198">&#39;vue-router&#39;</span>
<span style="color:#268bd2">import</span> ElementUI from <span style="color:#2aa198">&#39;element-ui&#39;</span>;
<span style="color:#268bd2">import</span> <span style="color:#2aa198">&#39;element-ui/lib/theme-chalk/index.css&#39;</span>;

<span style="color:#268bd2">import</span> store from <span style="color:#2aa198">&#39;../store&#39;</span>
<span style="color:#b58900">window</span>.store <span style="color:#719e07">=</span> store

Vue.use(ElementUI);
Vue.use(Router)
<span style="color:#586e75">/* 使用 component: ()=&gt; import(&#39;@/pages/Index/template.vue&#39;) 的写法
</span><span style="color:#586e75"> * 每次打开对应页面才会加载页面的数据，不会一次性加载所有页面 */</span>
<span style="color:#268bd2">const</span> router <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> Router({
  routes<span style="color:#719e07">:</span> [
    { 
      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/&#39;</span>, 
      component<span style="color:#719e07">:</span> ()=&gt; <span style="color:#268bd2">import</span>(<span style="color:#2aa198">&#39;@/pages/Index/template.vue&#39;</span>)
    },
    { <span style="color:#586e75">// 创建博客页面
</span><span style="color:#586e75"></span>      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/create&#39;</span>,
      component<span style="color:#719e07">:</span> ()=&gt; <span style="color:#268bd2">import</span>(<span style="color:#2aa198">&#39;@/pages/Create/template.vue&#39;</span>),
      meta<span style="color:#719e07">:</span> { requiresAuth<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span> }
    },
    { <span style="color:#586e75">// 用户详情页面
</span><span style="color:#586e75"></span>      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/detail/:blogId&#39;</span>, 
      component<span style="color:#719e07">:</span> ()=&gt; <span style="color:#268bd2">import</span>(<span style="color:#2aa198">&#39;@/pages/Detail/template.vue&#39;</span>)
    },
    { <span style="color:#586e75">// 编辑博客页面
</span><span style="color:#586e75"></span>      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/edit/:blogId&#39;</span>, 
      component<span style="color:#719e07">:</span> ()=&gt; <span style="color:#268bd2">import</span>(<span style="color:#2aa198">&#39;@/pages/Edit/template.vue&#39;</span>),
      meta<span style="color:#719e07">:</span> { requiresAuth<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span> }
    },
    { <span style="color:#586e75">// 登录
</span><span style="color:#586e75"></span>      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/login&#39;</span>, 
      component<span style="color:#719e07">:</span> ()=&gt; <span style="color:#268bd2">import</span>(<span style="color:#2aa198">&#39;@/pages/Login/template.vue&#39;</span>)
    },
    { <span style="color:#586e75">// 我的个人主页
</span><span style="color:#586e75"></span>      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/my&#39;</span>, 
      component<span style="color:#719e07">:</span> ()=&gt; <span style="color:#268bd2">import</span>(<span style="color:#2aa198">&#39;@/pages/My/template.vue&#39;</span>),
      meta<span style="color:#719e07">:</span> { requiresAuth<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span> }
    },
    { <span style="color:#586e75">// 注册
</span><span style="color:#586e75"></span>      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/register&#39;</span>, 
      component<span style="color:#719e07">:</span> ()=&gt; <span style="color:#268bd2">import</span>(<span style="color:#2aa198">&#39;@/pages/Register/template.vue&#39;</span>)
    },
    { <span style="color:#586e75">// 其他用户主页
</span><span style="color:#586e75"></span>      path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/user/:blogId&#39;</span>, 
      component<span style="color:#719e07">:</span> ()=&gt; <span style="color:#268bd2">import</span>(<span style="color:#2aa198">&#39;@/pages/User/template.vue&#39;</span>)
    }
  ]
})
<span style="color:#586e75">/* 此处遍历上面的每一项路由，然后获取路由信息
</span><span style="color:#586e75"> * to.matched.some(record=&gt; record.meta.requiresAuth)获取路由中的 meta.requiresAuth 信息
</span><span style="color:#586e75"> * 如果匹配到存在 meta.requiresAuth 的路由，则执行里面的 if 否则继续下一步(next())
</span><span style="color:#586e75"> */</span>
router.beforeEach((to, from, next)=&gt;{
  <span style="color:#719e07">if</span>(to.matched.some(record=&gt; record.meta.requiresAuth)){
    <span style="color:#586e75">// 此处if判断，获取到 store &gt; modules &gt; auth.js 中的用户登录状态 (actions checkLogin)
</span><span style="color:#586e75"></span>    store.dispatch(<span style="color:#2aa198">&#39;checkLogin&#39;</span>).then(isLogin=&gt;{
      <span style="color:#586e75">// 如果用户未登录则跳转到登录页面，如果用户登录就继续执行下一步
</span><span style="color:#586e75"></span>      <span style="color:#719e07">if</span>(<span style="color:#719e07">!</span>isLogin){
        next({
          path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/login&#39;</span>,
          query<span style="color:#719e07">:</span> { redirect<span style="color:#719e07">:</span> to.fullPath }
        })
      } <span style="color:#719e07">else</span> {
        next()
      }
    })
  } <span style="color:#719e07">else</span> {
    next()
  }
})

<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> router
</code></pre></div><p>打开 src 目录下的 <code>pages &gt; Login &gt; template.js</code> 修改其中的 onLogin 函数(登录后跳转操作)</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">onLogin(){
    <span style="color:#719e07">this</span>.login({username<span style="color:#719e07">:</span> <span style="color:#719e07">this</span>.username, password<span style="color:#719e07">:</span> <span style="color:#719e07">this</span>.password})
      .then(()=&gt;{ 
        <span style="color:#586e75">// 获取用户登录之前的其他页面信息，如果存在就跳转回去，不存在就跳转到主页
</span><span style="color:#586e75"></span>        <span style="color:#719e07">this</span>.$router.push({path<span style="color:#719e07">:</span> <span style="color:#719e07">this</span>.$route.query.redirect <span style="color:#719e07">||</span> <span style="color:#2aa198">&#39;/&#39;</span>})
      })
}
</code></pre></div><h2 id="添加创建博客功能">
  添加创建博客功能
  <a class="anchor" href="#%e6%b7%bb%e5%8a%a0%e5%88%9b%e5%bb%ba%e5%8d%9a%e5%ae%a2%e5%8a%9f%e8%83%bd">#</a>
</h2>
<p><code>pages &gt; create</code> 文件夹中的文件</p>
<p>vue</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">template</span>&gt;
  &lt;<span style="color:#268bd2">div</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;edit&#34;</span>&gt;
    &lt;<span style="color:#268bd2">h2</span>&gt;创建文章&lt;/<span style="color:#268bd2">h2</span>&gt;
    &lt;<span style="color:#268bd2">h3</span>&gt;文章标题&lt;<span style="color:#268bd2">span</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;msg&#34;</span>&gt;( 限30个字 )&lt;/<span style="color:#268bd2">span</span>&gt;&lt;/<span style="color:#268bd2">h3</span>&gt;
    &lt;<span style="color:#268bd2">el-input</span> placeholder<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;请输入文章标题&#34;</span> <span style="color:#268bd2">v-model</span><span style="color:#2aa198">=&#34;title&#34;</span>&gt;&lt;/el<span style="color:#268bd2">-input</span>&gt;
    &lt;<span style="color:#268bd2">h3</span>&gt;内容简介&lt;<span style="color:#268bd2">span</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;msg&#34;</span>&gt;( 限30个字 )&lt;/<span style="color:#268bd2">span</span>&gt;&lt;/<span style="color:#268bd2">h3</span>&gt;
    &lt;<span style="color:#268bd2">el-input</span> type<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;textarea&#34;</span> <span style="color:#719e07">:</span>autosize<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;{ minRows: 2, maxRows: 10}&#34;</span> placeholder<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;请输入文章简介&#34;</span> <span style="color:#268bd2">v-model</span><span style="color:#2aa198">=&#34;description&#34;</span>&gt;&lt;/el<span style="color:#268bd2">-input</span>&gt;
    &lt;<span style="color:#268bd2">h3</span>&gt;文章内容&lt;<span style="color:#268bd2">span</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;msg&#34;</span>&gt;( 限30个字 )&lt;/<span style="color:#268bd2">span</span>&gt;&lt;/<span style="color:#268bd2">h3</span>&gt;
    &lt;<span style="color:#268bd2">el-input</span> type<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;textarea&#34;</span> <span style="color:#719e07">:</span>autosize<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;{ minRows: 6, maxRows: 10}&#34;</span> placeholder<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;请输入文章内容&#34;</span> <span style="color:#268bd2">v-model</span><span style="color:#2aa198">=&#34;content&#34;</span>&gt;&lt;/el<span style="color:#268bd2">-input</span>&gt;
    &lt;<span style="color:#268bd2">div</span>&gt;
      &lt;<span style="color:#268bd2">el-switch</span> <span style="color:#268bd2">v-model</span><span style="color:#2aa198">=&#34;atIndex&#34; active-color=&#34;#409EFF&#34; active-text=&#34;在首页展示&#34;&gt;&lt;/el-switch&gt;
</span><span style="color:#2aa198">    &lt;/div&gt;
</span><span style="color:#2aa198">    &lt;el-button size=&#34;medium&#34; type=&#34;primary&#34; plain @click=&#34;onCreate&#34;&gt;确定&lt;/el-button&gt;
</span><span style="color:#2aa198">  &lt;/div&gt;
</span><span style="color:#2aa198">&lt;/template&gt;
</span><span style="color:#2aa198">&lt;script src=&#34;./template.js&#34;&gt;&lt;/script&gt;
</span><span style="color:#2aa198">&lt;style scoped lang=&#34;less&#34; src=&#34;./template.less&#34;</span>&gt;&lt;/<span style="color:#268bd2">style</span>&gt;
</code></pre></div><p>js</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> blog from <span style="color:#2aa198">&#39;@/api/blog&#39;</span>

<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
    data () {
      <span style="color:#719e07">return</span> {
        title<span style="color:#719e07">:</span><span style="color:#2aa198">&#39;&#39;</span>,
        description<span style="color:#719e07">:</span><span style="color:#2aa198">&#39;&#39;</span>,
        content<span style="color:#719e07">:</span><span style="color:#2aa198">&#39;&#39;</span>,
        atIndex<span style="color:#719e07">:</span> <span style="color:#cb4b16">false</span>
      }
    },
    methods<span style="color:#719e07">:</span> {
      onCreate(){
        <span style="color:#586e75">// 调用 API 中的 blog API 将新创建的博客添加到 多人共享博客的后台数据
</span><span style="color:#586e75"></span>        blog.createBlog({ 
          title<span style="color:#719e07">:</span> <span style="color:#719e07">this</span>.title, 
          content<span style="color:#719e07">:</span> <span style="color:#719e07">this</span>.content, 
          description<span style="color:#719e07">:</span> <span style="color:#719e07">this</span>.description, 
          atIndex<span style="color:#719e07">:</span> <span style="color:#719e07">this</span>.atIndex 
        }).then(res =&gt; {
          <span style="color:#586e75">// then处理数据 成功后提示创建成功
</span><span style="color:#586e75"></span>          <span style="color:#719e07">this</span>.$message.success(res.msg)
          <span style="color:#586e75">// 跳转到刚刚创建的指定文章详情下，文章 id 从传入的 res.data.id 中获取
</span><span style="color:#586e75"></span>          <span style="color:#719e07">this</span>.$router.push({ path<span style="color:#719e07">:</span> <span style="color:#586e75">`/detail/</span><span style="color:#2aa198">${</span>res.data.id<span style="color:#2aa198">}</span><span style="color:#586e75">`</span>})
        })
      }
    }
  }
</code></pre></div><h2 id="首页添加后台数据">
  首页添加后台数据
  <a class="anchor" href="#%e9%a6%96%e9%a1%b5%e6%b7%bb%e5%8a%a0%e5%90%8e%e5%8f%b0%e6%95%b0%e6%8d%ae">#</a>
</h2>
<p>代码</p>
<p>vue</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">template</span>&gt;
  &lt;<span style="color:#268bd2">div</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;index&#34;</span>&gt;
    &lt;<span style="color:#268bd2">section</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;blog-posts&#34;</span>&gt;
      &lt;<span style="color:#268bd2">router-link</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;item&#34;</span> <span style="color:#268bd2">v-for</span><span style="color:#2aa198">=&#34;blog in blogs&#34; :to=&#34;`/detail/${blog.id}`&#34; :key=&#34;blog.id&#34;&gt;
</span><span style="color:#2aa198">          &lt;figure class=&#34;avatar&#34;&gt;
</span><span style="color:#2aa198">            &lt;img :src=&#34;blog.user.avatar&#34; :alt=&#34;blog.user.username&#34;&gt;
</span><span style="color:#2aa198">            &lt;figcaption&gt;{{blog.user.username}}&lt;/figcaption&gt;
</span><span style="color:#2aa198">          &lt;/figure&gt;
</span><span style="color:#2aa198">          &lt;div class=&#34;text&#34;&gt;
</span><span style="color:#2aa198">            &lt;h3&gt;{{blog.title}}&lt;span&gt;{{blog.createdAt}}&lt;/span&gt;&lt;/h3&gt;
</span><span style="color:#2aa198">            &lt;p&gt;{{blog.description}}&lt;/p&gt;
</span><span style="color:#2aa198">          &lt;/div&gt;
</span><span style="color:#2aa198">      &lt;/router-link&gt;
</span><span style="color:#2aa198">    &lt;/section&gt;
</span><span style="color:#2aa198">    &lt;section class=&#34;blog-pages&#34;&gt;
</span><span style="color:#2aa198">      &lt;el-pagination
</span><span style="color:#2aa198">        background
</span><span style="color:#2aa198">        :current-page.sync=&#34;thisPage&#34;
</span><span style="color:#2aa198">        layout=&#34;prev, pager, next&#34;
</span><span style="color:#2aa198">        :total=&#34;total&#34;
</span><span style="color:#2aa198">        @current-change=&#34;onPagesChange&#34;&gt;
</span><span style="color:#2aa198">      &lt;/el-pagination&gt;
</span><span style="color:#2aa198">    &lt;/section&gt;
</span><span style="color:#2aa198">  &lt;/div&gt;
</span><span style="color:#2aa198">&lt;/template&gt;
</span><span style="color:#2aa198">&lt;script src=&#34;./template.js&#34;&gt;&lt;/script&gt;
</span><span style="color:#2aa198">&lt;style scoped lang=&#34;less&#34; src=&#34;./template.less&#34;</span>&gt;&lt;/<span style="color:#268bd2">style</span>&gt;
</code></pre></div><p>js</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> blog from <span style="color:#2aa198">&#39;@/api/blog.js&#39;</span>

<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
    data () {
      <span style="color:#719e07">return</span> {
        blogs<span style="color:#719e07">:</span> [],
        total<span style="color:#719e07">:</span> <span style="color:#2aa198">0</span>,
        page<span style="color:#719e07">:</span> <span style="color:#2aa198">1</span>
      }
    },
    created(){
      <span style="color:#719e07">this</span>.page <span style="color:#719e07">=</span> <span style="color:#b58900">parseInt</span>(<span style="color:#719e07">this</span>.$route.query.page) <span style="color:#719e07">||</span> <span style="color:#2aa198">1</span>
      blog.getIndexBlogs().then(res=&gt;{
        <span style="color:#719e07">this</span>.blogs <span style="color:#719e07">=</span> res.data
        <span style="color:#719e07">this</span>.total <span style="color:#719e07">=</span> res.total
        <span style="color:#719e07">this</span>.page <span style="color:#719e07">=</span> res.page
      })
    },
    methods<span style="color:#719e07">:</span> {
      onPagesChange(newPage){
        blog.getIndexBlogs({ page<span style="color:#719e07">:</span> newPage}).then(res =&gt;{
          <span style="color:#719e07">this</span>.blogs <span style="color:#719e07">=</span> res.data
          <span style="color:#719e07">this</span>.total <span style="color:#719e07">=</span> res.total
          <span style="color:#719e07">this</span>.page <span style="color:#719e07">=</span> res.page
          <span style="color:#719e07">this</span>.$route.push({ path<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;/&#39;</span>, query<span style="color:#719e07">:</span> { page<span style="color:#719e07">:</span>newPage }})
        })
      }
    }
  }
</code></pre></div><p>添加</p>
<h2 id="添加博客详情">
  添加博客详情
  <a class="anchor" href="#%e6%b7%bb%e5%8a%a0%e5%8d%9a%e5%ae%a2%e8%af%a6%e6%83%85">#</a>
</h2>
<p>代码</p>
<p>vue</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">template</span>&gt;
  &lt;<span style="color:#268bd2">div</span> id<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;detail&#34;</span>&gt;
    &lt;<span style="color:#268bd2">section</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;user-info&#34;</span>&gt;
      &lt;<span style="color:#268bd2">div</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;photo&#34;</span>&gt;
        &lt;<span style="color:#268bd2">img</span> <span style="color:#268bd2">:src</span><span style="color:#2aa198">=&#34;user.avatar&#34;</span> <span style="color:#268bd2">:alt</span><span style="color:#2aa198">=&#34;user.username&#34;</span> <span style="color:#268bd2">:title</span><span style="color:#2aa198">=&#34;user.username&#34;</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;avatar&#34;</span>&gt;
      &lt;/<span style="color:#268bd2">div</span>&gt;
      &lt;<span style="color:#268bd2">div</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;text&#34;</span>&gt;
        &lt;<span style="color:#268bd2">h3</span>&gt;{{title}}&lt;/<span style="color:#268bd2">h3</span>&gt;
        &lt;<span style="color:#268bd2">p</span>&gt;&lt;<span style="color:#268bd2">router-link</span> <span style="color:#268bd2">:to</span><span style="color:#2aa198">=&#34;`/user/${user.id}`&#34;</span>&gt;{{user.username}}<span style="color:#719e07">&lt;</span>/router-link&gt;发布于{{friendlyDate(createdAt)}}&lt;/p&gt;
      &lt;/<span style="color:#268bd2">div</span>&gt;
    &lt;/<span style="color:#268bd2">section</span>&gt;
    &lt;<span style="color:#268bd2">section</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;article&#34;</span> <span style="color:#268bd2">v-html</span><span style="color:#2aa198">=&#34;markdown&#34;</span>&gt;&lt;/<span style="color:#268bd2">section</span>&gt;
  &lt;/<span style="color:#268bd2">div</span>&gt;
&lt;/<span style="color:#268bd2">template</span>&gt;
&lt;<span style="color:#268bd2">script</span> src<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;./template.js&#34;</span>&gt;&lt;/<span style="color:#268bd2">script</span>&gt;
&lt;<span style="color:#268bd2">style</span> scoped lang<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;less&#34;</span> src<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;./template.less&#34;</span>&gt;&lt;/<span style="color:#268bd2">style</span>&gt;
</code></pre></div><p>js</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> marked from <span style="color:#2aa198">&#39;marked&#39;</span>
<span style="color:#268bd2">import</span> blog from <span style="color:#2aa198">&#39;@/api/blog&#39;</span>

<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
  data() {
    <span style="color:#719e07">return</span> {
      title<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;&#39;</span>,
      rawContent<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;&#39;</span>,
      user<span style="color:#719e07">:</span> {},
      createdAt<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;&#39;</span>
    }
  },
  created() {
    <span style="color:#719e07">this</span>.blogId <span style="color:#719e07">=</span> <span style="color:#719e07">this</span>.$route.params.blogId
    blog.getDetail({ blogId<span style="color:#719e07">:</span> <span style="color:#719e07">this</span>.blogId }).then(res =&gt; {
      console.log(<span style="color:#2aa198">&#39;detail &gt; res&#39;</span>)
      console.log(res)
      <span style="color:#719e07">this</span>.title <span style="color:#719e07">=</span> res.data.title
      <span style="color:#719e07">this</span>.rawContent <span style="color:#719e07">=</span> res.data.content
      <span style="color:#719e07">this</span>.createdAt <span style="color:#719e07">=</span> res.data.createdAt
      <span style="color:#719e07">this</span>.user <span style="color:#719e07">=</span> res.data.user
    })
  },
  computed<span style="color:#719e07">:</span> {
    markdown() {
      <span style="color:#719e07">return</span> marked(<span style="color:#719e07">this</span>.rawContent)
    }
  }
}
</code></pre></div><h3 id="markdown-插件">
  markdown 插件
  <a class="anchor" href="#markdown-%e6%8f%92%e4%bb%b6">#</a>
</h3>
<p>安装</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i marked --save
</code></pre></div><p>将 markdown 数据转换为 html 格式</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">section</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;article&#34;</span> <span style="color:#268bd2">v-html</span><span style="color:#2aa198">=&#34;markdown&#34;</span>&gt;&lt;/<span style="color:#268bd2">section</span>&gt;
</code></pre></div><h3 id="时间格式化插件">
  时间格式化插件
  <a class="anchor" href="#%e6%97%b6%e9%97%b4%e6%a0%bc%e5%bc%8f%e5%8c%96%e6%8f%92%e4%bb%b6">#</a>
</h3>
<p>在 <code>src &gt; helpers </code> 中创建 <code>util.js</code> 文件</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">function</span> friendlyDate(datsStr) {
    <span style="color:#268bd2">let</span> dateObj <span style="color:#719e07">=</span> <span style="color:#719e07">typeof</span> datsStr <span style="color:#719e07">===</span> <span style="color:#2aa198">&#39;object&#39;</span> <span style="color:#719e07">?</span> datsStr <span style="color:#719e07">:</span> <span style="color:#719e07">new</span> <span style="color:#b58900">Date</span>(datsStr)
    <span style="color:#268bd2">let</span> time <span style="color:#719e07">=</span> dateObj.getTime()
    <span style="color:#268bd2">let</span> now <span style="color:#719e07">=</span> <span style="color:#b58900">Date</span>.now()
    <span style="color:#268bd2">let</span> space <span style="color:#719e07">=</span> now <span style="color:#719e07">-</span> time
    <span style="color:#268bd2">let</span> str <span style="color:#719e07">=</span> <span style="color:#2aa198">&#39;&#39;</span>
  
    <span style="color:#719e07">switch</span> (<span style="color:#cb4b16">true</span>) {
      <span style="color:#719e07">case</span> space <span style="color:#719e07">&lt;</span> <span style="color:#2aa198">60000</span><span style="color:#719e07">:</span>
        str <span style="color:#719e07">=</span> <span style="color:#2aa198">&#39;刚刚&#39;</span>
        <span style="color:#719e07">break</span>
      <span style="color:#719e07">case</span> space <span style="color:#719e07">&lt;</span> <span style="color:#2aa198">1000</span><span style="color:#719e07">*</span><span style="color:#2aa198">3600</span><span style="color:#719e07">:</span>
        str <span style="color:#719e07">=</span> <span style="color:#b58900">Math</span>.floor(space<span style="color:#719e07">/</span><span style="color:#2aa198">60000</span>) <span style="color:#719e07">+</span> <span style="color:#2aa198">&#39;分钟前&#39;</span>
        <span style="color:#719e07">break</span>
      <span style="color:#719e07">case</span> space <span style="color:#719e07">&lt;</span> <span style="color:#2aa198">1000</span><span style="color:#719e07">*</span><span style="color:#2aa198">3600</span><span style="color:#719e07">*</span><span style="color:#2aa198">24</span><span style="color:#719e07">:</span>
        str <span style="color:#719e07">=</span> <span style="color:#b58900">Math</span>.floor(space<span style="color:#719e07">/</span>(<span style="color:#2aa198">1000</span><span style="color:#719e07">*</span><span style="color:#2aa198">3600</span>)) <span style="color:#719e07">+</span> <span style="color:#2aa198">&#39;小时前&#39;</span>
        <span style="color:#719e07">break</span>
      <span style="color:#719e07">default</span><span style="color:#719e07">:</span>
        str <span style="color:#719e07">=</span> <span style="color:#b58900">Math</span>.floor(space<span style="color:#719e07">/</span>(<span style="color:#2aa198">1000</span><span style="color:#719e07">*</span><span style="color:#2aa198">3600</span><span style="color:#719e07">*</span><span style="color:#2aa198">24</span>)) <span style="color:#719e07">+</span> <span style="color:#2aa198">&#39;天前&#39;</span>
    }
    <span style="color:#719e07">return</span> str
  }
  
  <span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
    install(Vue, options) {
      Vue.prototype.friendlyDate <span style="color:#719e07">=</span> friendlyDate
    }
  }
</code></pre></div><p>在 <code>src &gt; main.js</code> 中引入插件</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> Util from <span style="color:#2aa198">&#39;@/helpers/util&#39;</span>
Vue.use(Util)
</code></pre></div><p>页面中使用</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">span</span>&gt;{{friendlyDate(date)}}&lt;/<span style="color:#268bd2">span</span>&gt;
</code></pre></div><h2 id="用户详情页">
  用户详情页
  <a class="anchor" href="#%e7%94%a8%e6%88%b7%e8%af%a6%e6%83%85%e9%a1%b5">#</a>
</h2>
<p>添加时间格式化事件</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">splitDate(dataStr) {
    <span style="color:#268bd2">let</span> dateObj <span style="color:#719e07">=</span> <span style="color:#719e07">typeof</span> dataStr <span style="color:#719e07">===</span> <span style="color:#2aa198">&#39;object&#39;</span> <span style="color:#719e07">?</span> dataStr <span style="color:#719e07">:</span> <span style="color:#719e07">new</span> <span style="color:#b58900">Date</span>(dataStr)
    <span style="color:#719e07">return</span> {
      date<span style="color:#719e07">:</span> dateObj.getDate(),
      month<span style="color:#719e07">:</span> dateObj.getMonth() <span style="color:#719e07">+</span> <span style="color:#2aa198">1</span>,
      year<span style="color:#719e07">:</span> dateObj.getFullYear()
    }
}
</code></pre></div><h2 id="使用到的-vue-语句">
  使用到的 Vue 语句
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8%e5%88%b0%e7%9a%84-vue-%e8%af%ad%e5%8f%a5">#</a>
</h2>
<p>绑定数据</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">img</span> <span style="color:#268bd2">:src</span><span style="color:#2aa198">=&#34;user.avatar&#34;</span> <span style="color:#268bd2">:alt</span><span style="color:#2aa198">=&#34;user.username&#34;</span>&gt;
&lt;<span style="color:#268bd2">router-link</span> <span style="color:#268bd2">:to</span><span style="color:#2aa198">=&#34;`/user/${user.id}`&#34;</span>&gt;用户名称<span style="color:#719e07">&lt;</span>/router-link&gt;
</code></pre></div><p>数据转换为html格式</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">section</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;article&#34;</span> <span style="color:#268bd2">v-html</span><span style="color:#2aa198">=&#34;markdown&#34;</span>&gt;&lt;/<span style="color:#268bd2">section</span>&gt;
</code></pre></div><p>input 输入框回车事件</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">input</span> <span style="color:#268bd2">@keyup.enter</span><span style="color:#2aa198">=&#34;onLogin&#34;</span> <span style="color:#268bd2">v-model</span><span style="color:#2aa198">=&#34;password&#34; type=&#34;password&#34; placeholder=&#34;请输入密码&#34;</span>&gt;
</code></pre></div><p>防止 <code>@click</code> 事件冒泡</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">router-link</span> <span style="color:#268bd2">@click.prevent</span><span style="color:#2aa198">=&#34;onDelete(blog.id)&#34;</span>&gt;删除<span style="color:#719e07">&lt;</span>/router-link&gt;
</code></pre></div><p>预加载数据</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> {
  data() { <span style="color:#719e07">return</span> { } },
  created() { },
  computed<span style="color:#719e07">:</span> { }
}
</code></pre></div><h3 id="router">
  router
  <a class="anchor" href="#router">#</a>
</h3>
<p>获取</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#586e75">// 获取用户id案例
</span><span style="color:#586e75"></span><span style="color:#719e07">this</span>.$route.params.blogId
</code></pre></div><p>链接</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">router-link</span> to<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;/register&#34;</span>&gt;注册<span style="color:#719e07">&lt;</span>/router-link&gt;
</code></pre></div><p>页面跳转</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#719e07">this</span>.$router.push({ path<span style="color:#719e07">:</span> <span style="color:#586e75">`/detail/</span><span style="color:#2aa198">${</span>res.data.id<span style="color:#2aa198">}</span><span style="color:#586e75">`</span>})
</code></pre></div><p><code>for in</code> 循环获取数据</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">router-link</span> class<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;item&#34;</span> <span style="color:#268bd2">v-for</span><span style="color:#2aa198">=&#34;blog in blogs&#34; :to=&#34;`/detail/${blog.id}`&#34; :key=&#34;blog.id&#34;</span>&gt;&lt;/router<span style="color:#268bd2">-link</span>&gt;
</code></pre></div><blockquote>
<p>注意此处需要绑定 key 的值</p>
</blockquote>
<h2 id="使用到的-element-ui-语句">
  使用到的 Element-UI 语句
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8%e5%88%b0%e7%9a%84-element-ui-%e8%af%ad%e5%8f%a5">#</a>
</h2>
<p>绑定事件</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">el-link</span> <span style="color:#268bd2">@click</span><span style="color:#2aa198">=&#34;onLogout&#34;</span> <span style="color:#268bd2">:underline</span><span style="color:#2aa198">=&#34;false&#34;</span>&gt; <span style="color:#719e07">&lt;</span>/el-link&gt;
&lt;<span style="color:#268bd2">el-button</span> size<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;medium&#34;</span> type<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;primary&#34;</span> plain <span style="color:#268bd2">@click</span><span style="color:#2aa198">=&#34;onCreate&#34;</span>&gt;确定&lt;/el<span style="color:#268bd2">-button</span>&gt;
</code></pre></div><p>多行输入框</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">el-input</span> type<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;textarea&#34;</span> <span style="color:#719e07">:</span>autosize<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;{ minRows: 2, maxRows: 10}&#34;</span> placeholder<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;请输入内容&#34;</span> <span style="color:#268bd2">v-model</span><span style="color:#2aa198">=&#34;description&#34;</span>&gt;&lt;/el<span style="color:#268bd2">-input</span>&gt;
</code></pre></div><blockquote>
<p><code>minRows</code> 最小高度(行) <code>maxRows</code> 最大高度(行)</p>
</blockquote>
<p>多页面切换按钮</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#268bd2">el-pagination</span>
    background
    <span style="color:#268bd2">:current-page.sync</span><span style="color:#2aa198">=&#34;page&#34;</span>
    layout<span style="color:#719e07">=</span><span style="color:#2aa198">&#34;prev, pager, next&#34;</span>
    <span style="color:#268bd2">:total</span><span style="color:#2aa198">=&#34;total&#34;</span>
    <span style="color:#268bd2">@current-change</span><span style="color:#2aa198">=&#34;onPagesChange&#34;</span>&gt;
<span style="color:#719e07">&lt;</span>/el-pagination&gt;
</code></pre></div><h2 id="axios-的使用">
  axios 的使用
  <a class="anchor" href="#axios-%e7%9a%84%e4%bd%bf%e7%94%a8">#</a>
</h2>
<p>应用的属性</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#268bd2">import</span> axios from <span style="color:#2aa198">&#39;axios&#39;</span>

<span style="color:#586e75">/* 请求的数据类型约定 */</span>
axios.defaults.headers.post[<span style="color:#2aa198">&#39;Content-Type&#39;</span>] <span style="color:#719e07">=</span> <span style="color:#2aa198">&#39;application/x-www-form-urlencoded&#39;</span>
<span style="color:#586e75">/* 后端接口域名地址(设置后请求时就可以不用写这部分 URL) */</span>
axios.defaults.baseURL <span style="color:#719e07">=</span> <span style="color:#2aa198">&#39;https://blog-server.hunger-valley.com&#39;</span>
<span style="color:#586e75">/* 前后端分离的项目，前端后端是在不同的服务器上，会涉及到跨域(默认情况跨域请求是不带 Cookie 数据的)
</span><span style="color:#586e75"> * 此处设置异步请求(跨域)带 Cookie 数据 -- */</span>
axios.defaults.withCredentials <span style="color:#719e07">=</span> <span style="color:#cb4b16">true</span>
<span style="color:#268bd2">export</span> <span style="color:#719e07">default</span> <span style="color:#268bd2">function</span> request(url, type <span style="color:#719e07">=</span> <span style="color:#2aa198">&#39;GET&#39;</span>, data <span style="color:#719e07">=</span> {}) {
    <span style="color:#719e07">return</span> <span style="color:#719e07">new</span> <span style="color:#b58900">Promise</span>((resolve, reject) =&gt; {
        <span style="color:#586e75">/* 声明一个变量，存储 url 和 type */</span>
        <span style="color:#268bd2">let</span> option <span style="color:#719e07">=</span> {
            url,
            method<span style="color:#719e07">:</span> type
        }
    <span style="color:#586e75">/*  判断请求类型，如果是 get 请求，就将 data 放到 option.params 中
</span><span style="color:#586e75">     *  如果是其他类型，就将 data 直接放入 option.data 中 */</span>
        <span style="color:#719e07">if</span> (type.toLowerCase() <span style="color:#719e07">===</span> <span style="color:#2aa198">&#39;get&#39;</span>) {
            option.params <span style="color:#719e07">=</span> data
        } <span style="color:#719e07">else</span> {
            option.data <span style="color:#719e07">=</span> data
        }
        axios(option).then(res =&gt; {
            <span style="color:#586e75">/* 如果返回的数据 data.status = &#39;ok&#39;
</span><span style="color:#586e75">             * - 如果成功返回数据格式：{ &#34;status&#34;: &#34;ok&#34;, &#34;msg&#34;: &#34;注册成功&#34;, &#34;data&#34;: { xxx } }
</span><span style="color:#586e75">             * - 之后就可以.then()处理这个数据 */</span>
            <span style="color:#719e07">if</span> (res.data.status <span style="color:#719e07">===</span> <span style="color:#2aa198">&#39;ok&#39;</span>) {
                <span style="color:#586e75">/* 将数据传入 resolve() 函数中 */</span>
                resolve(res.data)
            <span style="color:#586e75">/* 如果请求数据未成功
</span><span style="color:#586e75">             * - 如果错误返回数据格式：{&#34;status&#34;: &#34;fail&#34;, &#34;msg&#34;: &#34;错误原因&#34;}
</span><span style="color:#586e75">             * - 其中 res.data.msg 表示返回错误的原因 */</span>
            } <span style="color:#719e07">else</span> {
                alert(<span style="color:#2aa198">&#39;发现一个错误&#39;</span>)
                <span style="color:#586e75">/* 把错误传入 reject() */</span>
                reject(res.data)
            }
        <span style="color:#586e75">// 当发生网络异常的错误时，返回一个函数，执行以下内容    
</span><span style="color:#586e75"></span>        }).<span style="color:#719e07">catch</span>(err =&gt; {
            alert(<span style="color:#2aa198">&#39;网络异常&#39;</span>)
            <span style="color:#586e75">/* 返回的数据中的msg属性为 &#39;网络异常&#39; */</span>
            reject({ msg<span style="color:#719e07">:</span> <span style="color:#2aa198">&#39;网络异常&#39;</span> })
        })
    })
}
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#vue-cli">Vue-Cli</a>
      <ul>
        <li><a href="#安装">安装</a></li>
        <li><a href="#使用-vue-2x-模板">使用 Vue-2.x 模板</a></li>
        <li><a href="#当前目录创建项目">当前目录创建项目</a></li>
      </ul>
    </li>
    <li><a href="#项目文件目录">项目文件目录</a></li>
    <li><a href="#配置路由">配置路由</a></li>
    <li><a href="#组件目录">组件目录</a></li>
    <li><a href="#css-样式独立">CSS 样式独立</a></li>
    <li><a href="#使用-less-语法">使用 less 语法</a>
      <ul>
        <li><a href="#安装预处理器">安装预处理器</a></li>
        <li><a href="#使用-css-公共属性">使用 CSS 公共属性</a></li>
      </ul>
    </li>
    <li><a href="#使用-element-ui">使用 Element-UI</a></li>
    <li><a href="#创建公共目录">创建公共目录</a></li>
    <li><a href="#测试后台">测试后台</a>
      <ul>
        <li><a href="#requestjs-封装测试">request.js 封装测试</a></li>
        <li><a href="#authjs封装测试">auth.js封装测试</a></li>
      </ul>
    </li>
    <li><a href="#创建模板">创建模板</a>
      <ul>
        <li><a href="#使用-grid-布局">使用 Grid 布局</a></li>
      </ul>
    </li>
    <li><a href="#添加vuex">添加Vuex</a>
      <ul>
        <li><a href="#作用">作用</a></li>
        <li><a href="#安装-1">安装</a></li>
        <li><a href="#引入vuex">引入Vuex</a></li>
        <li><a href="#主页中引入">主页中引入</a></li>
        <li><a href="#实现登录注册功能">实现登录/注册功能</a></li>
      </ul>
    </li>
    <li><a href="#vue-事件绑定">Vue 事件绑定</a></li>
    <li><a href="#完善路由权限">完善路由权限</a></li>
    <li><a href="#添加创建博客功能">添加创建博客功能</a></li>
    <li><a href="#首页添加后台数据">首页添加后台数据</a></li>
    <li><a href="#添加博客详情">添加博客详情</a>
      <ul>
        <li><a href="#markdown-插件">markdown 插件</a></li>
        <li><a href="#时间格式化插件">时间格式化插件</a></li>
      </ul>
    </li>
    <li><a href="#用户详情页">用户详情页</a></li>
    <li><a href="#使用到的-vue-语句">使用到的 Vue 语句</a>
      <ul>
        <li><a href="#router">router</a></li>
      </ul>
    </li>
    <li><a href="#使用到的-element-ui-语句">使用到的 Element-UI 语句</a></li>
    <li><a href="#axios-的使用">axios 的使用</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












